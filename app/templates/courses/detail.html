{% extends 'base.html' %}
{% load static humanize %}

{% block title %}{{ course.title }} ‚Äî SkillsSpire{% endblock %}

{% block content %}

<!-- ============================
     HERO –°–û–í–†–ï–ú–ï–ù–ù–û–ì–û –¢–ò–ü–ê
============================ -->
<section class="modern-hero">
  <div class="container">
    <div class="hero-inner">

      <!-- –õ–ï–í–ê–Ø –ß–ê–°–¢–¨ -->
      <div class="hero-left">
        <span class="course-badge">{{ course.category.name }}</span>

        <h1 class="course-title">{{ course.title }}</h1>

        <p class="course-subtitle">
          {{ course.short_description }}
        </p>

        <ul class="hero-features">
          <li>üéì –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</li>
          <li>‚ôæÔ∏è –ë–µ—Å—Å—Ä–æ—á–Ω—ã–π –¥–æ—Å—Ç—É–ø</li>
          <li>üì± –ú–æ–±–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç</li>
          <li>üíæ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</li>
        </ul>

        <div class="hero-actions">
          <a class="hero-btn hero-btn-primary" data-bs-toggle="modal" data-bs-target="#enrollModal">
            <i class="bi bi-cart"></i> –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
          </a>

          <a class="hero-btn hero-btn-secondary" href="#program">
            <i class="bi bi-list-ul"></i> –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞
          </a>
        </div>
      </div>

      <!-- –ü–†–ê–í–ê–Ø –¶–ï–ù–¢–†–û–í–ê–Ø PRICE-CARD -->
      <div class="hero-right">
        <div class="course-price-card">
          <div class="new-price">
            {{ course.price|floatformat:0|intcomma }} ‚Ç∏
          </div>

          <button class="btn btn-primary btn-full mt-3"
                  data-bs-toggle="modal"
                  data-bs-target="#enrollModal">
            <i class="bi bi-cart"></i> –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
          </button>

          <button id="wishlistBtn" class="btn btn-outline btn-full mt-2">
            <i class="bi bi-heart"></i> –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
          </button>

          <div class="mt-4 small text-start">
            <ul class="hero-features small">
              <li>üìò {{ lessons|length }} —É—Ä–æ–∫–æ–≤</li>
              <li>üíæ –°–∫–∞—á–∏–≤–∞–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</li>
              <li>‚ôæÔ∏è –ü–æ–∂–∏–∑–Ω–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</li>
              <li>üì± –£–¥–æ–±–Ω–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</li>
              <li>üéì –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>


<!-- ============================
        –û –ö–£–†–°–ï
============================ -->
<section class="section">
  <div class="container">
    <h2 class="section-title">–û –∫—É—Ä—Å–µ</h2>

    <div class="fs-5 text-muted">
      {{ course.description|safe|default:"–û–ø–∏—Å–∞–Ω–∏–µ —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è." }}
    </div>
  </div>
</section>


<!-- ============================
       –ü–†–û–ì–†–ê–ú–ú–ê –ö–£–†–°–ê
============================ -->
<section id="program" class="section bg-light">
  <div class="container">
    <h2 class="section-title">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞</h2>

    {% if lessons %}
      <div class="lessons-list">
        {% for lesson in lessons %}
        <div class="lesson-item">
          <div>
            <h4 class="mb-1">{{ lesson.title }}</h4>
            <small class="text-muted">{{ lesson.duration_minutes|default:"" }} –º–∏–Ω</small>
          </div>

          <span class="badge bg-secondary">–ó–∞–∫—Ä—ã—Ç–æ</span>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–∑–∂–µ.</p>
    {% endif %}

  </div>
</section>


<!-- ============================
         –ò–ù–°–¢–†–£–ö–¢–û–†
============================ -->
<section class="section">
  <div class="container">
    <h2 class="section-title">–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</h2>

    <div class="instructor-card">
      <div class="text-center">
        <img src="{{ teacher_profile.avatar.url|default:'/static/img/avatar-placeholder.svg' }}"
             alt="–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä">

        <h4 class="fw-bold mt-3">{{ teacher.get_full_name }}</h4>
        <p class="text-muted">{{ teacher_profile.specialization|default:"–≠–∫—Å–ø–µ—Ä—Ç" }}</p>

        <p class="text-muted small">{{ teacher_profile.bio|truncatewords:30 }}</p>
      </div>
    </div>
  </div>
</section>


<!-- ============================
         –û–¢–ó–´–í–´
============================ -->
<section class="section bg-light">
  <div class="container">
    <h2 class="section-title">–û—Ç–∑—ã–≤—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h2>

    {% if reviews %}
    <div class="testimonials-grid">
      {% for review in reviews %}
      <div class="testimonial-card">
        <p>‚Äú{{ review.comment|truncatewords:25 }}‚Äù</p>
        <div class="small text-muted mt-3">
          ‚Äî {{ review.name|default:"–ê–Ω–æ–Ω–∏–º" }}, {{ review.created_at|date:"d M Y" }}
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤.</p>
    {% endif %}

  </div>
</section>

{% endblock %}
