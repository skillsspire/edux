v]{% extends "admin/base_site.html" %}
{% load humanize %}

{% block content %}
<div class="platform-dashboard">
    <h1>üìä –î–∞—à–±–æ—Ä–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã SkillsSpire</h1>
    
    <div class="metrics-grid">
        <div class="metric-card">
            <h3>üë• –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h3>
            <div class="value">{{ total_students|intcomma }}</div>
        </div>
        <div class="metric-card">
            <h3>üìö –ö—É—Ä—Å–æ–≤</h3>
            <div class="value">{{ total_courses|intcomma }}</div>
        </div>
        <div class="metric-card">
            <h3>üí∞ –í—ã—Ä—É—á–∫–∞ (30 –¥–Ω–µ–π)</h3>
            <div class="value">{{ total_revenue|intcomma }} ‚Ç∏</div>
        </div>
        <div class="metric-card">
            <h3>üìà –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤</h3>
            <div class="value">{{ completion_rate }}%</div>
        </div>
    </div>

    <div class="dashboard-sections">
        <div class="section">
            <h2>üéì –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
            <table>
                {% for course in popular_courses %}
                <tr>
                    <td><strong>{{ course.title }}</strong></td>
                    <td>{{ course.enrollment_count }} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        
        <div class="section">
            <h2>üí≥ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∏</h2>
            <table>
                {% for payment in recent_payments %}
                <tr>
                    <td><strong>{{ payment.user.username }}</strong></td>
                    <td>{{ payment.course.title|truncatewords:2 }}</td>
                    <td>{{ payment.amount }} ‚Ç∏</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</div>

<style>
.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

.metric-card {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    text-align: center;
}

.metric-card h3 {
    margin: 0 0 10px 0;
    color: #6b7280;
    font-size: 0.9em;
    text-transform: uppercase;
}

.metric-card .value {
    font-size: 2em;
    font-weight: bold;
    color: #2563eb;
}

.dashboard-sections {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-top: 30px;
}

.section {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.section table {
    width: 100%;
    border-collapse: collapse;
}

.section tr {
    border-bottom: 1px solid #eee;
}

.section td {
    padding: 10px;
}
</style>
{% endblock %}