{% extends "base.html" %}
{% load static %}

{% block title %}SkillsSpire ‚Äî –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–µ –æ–Ω–ª–∞–π–Ω-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ{% endblock %}

{% block extra_css %}
<style>
/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
.fade-up {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.6s ease;
}
.fade-up.visible {
  opacity: 1;
  transform: translateY(0);
}
</style>
{% endblock %}

{% block content %}

<!-- === HERO === -->
<section class="course-hero text-center fade-up">
  <div class="container">
    <span class="course-badge">üéì –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–µ –æ–Ω–ª–∞–π–Ω-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</span>
    <h1 class="course-title">–ù–∞—á–Ω–∏ –æ–±—É—á–µ–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ</h1>
    <p class="course-subtitle">
      –£—á–∏—Å—å —É –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä–æ–≤, –ø–æ–ª—É—á–∞–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ —É–ª—É—á—à–∞–π —Å–≤–æ–∏ –∫–∞—Ä—å–µ—Ä–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
    </p>

    <form action="{% url 'courses_list' %}" method="get" class="hero-search">
      <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –∫—É—Ä—Å–æ–≤..." aria-label="–ü–æ–∏—Å–∫ –∫—É—Ä—Å–æ–≤">
      <button type="submit">–ü–æ–∏—Å–∫</button>
    </form>

    <div class="mt-3 fade-up">
      <a href="{% url 'courses_list' %}" class="hero-btn hero-btn-primary">–ù–∞—á–Ω–∏ –æ–±—É—á–µ–Ω–∏–µ</a>
      <a href="#courses" class="hero-btn hero-btn-secondary">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã</a>
    </div>
  </div>
</section>

<!-- === –ö–£–†–°–´ === -->
<section id="courses" class="section courses-section fade-up">
  <div class="container text-center">
    <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
    <p class="text-muted">–°–∞–º—ã–µ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è</p>

    <div class="courses-grid mt-4">
      {% for course in popular_courses %}
        <a href="{% url 'course_detail' course.course.slug %}" class="course-card-link fade-up">
          <div class="course-card">
            <img src="{{ course.image_url|default:'/static/img/course-placeholder.png' }}" alt="{{ course.title }}" class="course-card-img">
            <div class="course-card-content">
              <span class="course-category">{{ course.course.category.name|default:"–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ" }}</span>
              <h3 class="course-card-title">{{ course.title }}</h3>
              <p class="course-card-text">{{ course.short_description|default:course.course.description|truncatechars:120 }}</p>
              <div class="course-card-meta">
                <div class="course-rating">
                  <i class="bi bi-star-fill"></i>
                  <span>{{ course.average_rating|default:"4.9" }}</span>
                  <span class="course-reviews">({{ course.reviews_count|default:"0" }} –æ—Ç–∑—ã–≤–æ–≤)</span>
                </div>
                <div class="course-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
              </div>
            </div>
          </div>
        </a>
      {% empty %}
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</p>
      {% endfor %}
    </div>

    <div class="mt-4 fade-up">
      <a href="{% url 'courses_list' %}" class="courses-btn">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã</a>
    </div>
  </div>
</section>

<!-- === CTA === -->
<section class="cta-section fade-up">
  <div class="container">
    <h2>–ù–∞—á–Ω–∏ –æ–±—É—á–µ–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ</h2>
    <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ —Ç—ã—Å—è—á–∞–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —É—á–∞—Ç—Å—è —Å –Ω–∞–º–∏!</p>
    <a href="{% url 'courses_list' %}" class="cta-button fade-up">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã</a>
  </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
// –ü–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
document.addEventListener("DOMContentLoaded", () => {
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add("visible");
    });
  }, { threshold: 0.1 });

  document.querySelectorAll(".fade-up").forEach(el => observer.observe(el));
});
</script>
{% endblock %}
