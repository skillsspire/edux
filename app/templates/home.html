{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
<style>
.faq-answer { display: none; padding: 0 1rem 1rem; }
.faq-item.active .faq-answer { display: block; }
.swiper { padding: 2rem 0; }
.swiper-slide { background:white; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.08); padding:1rem; }
</style>
{% endblock %}

{% block content %}

<section class="course-hero" style="background: linear-gradient(135deg, #01349D 0%, #3b5cc5 100%); color:white; padding:6rem 0;">
    <div class="container text-center">
        <span class="course-badge">üöÄ –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∫—É—Ä—Å 2025</span>
        <h1 class="course-title">–ù–∞—á–Ω–∏ –∫–∞—Ä—å–µ—Ä—É –≤ IT —Å –Ω—É–ª—è</h1>
        <p class="course-subtitle">–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫—É—Ä—Å—ã –æ—Ç —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –û–±—É—á–∞–π—Å—è –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –∏ –ø–æ–ª—É—á–∏ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é.</p>
        <form action="{% url 'courses_list' %}" method="get" class="hero-search" style="margin:2rem auto; max-width:500px; display:flex;">
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –∫—É—Ä—Å–æ–≤" style="flex:1; padding:0.75rem 1rem; border-radius:8px 0 0 8px; border:none;">
            <button type="submit" style="padding:0.75rem 1rem; border:none; background:#F6AD55; color:#0B1020; border-radius:0 8px 8px 0; font-weight:600;">–ü–æ–∏—Å–∫</button>
        </form>
        <div class="hero-cta" style="margin-top:2rem; display:flex; justify-content:center; gap:1rem;">
            <a href="{% url 'courses_list' %}" class="hero-btn hero-btn-primary">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</a>
            <a href="#courses" class="hero-btn hero-btn-secondary">–°–º–æ—Ç—Ä–µ—Ç—å –∫—É—Ä—Å—ã</a>
        </div>
    </div>
</section>

<section class="categories-section" style="padding:4rem 0; background:#F8FAFC;">
    <div class="container">
        <div class="section-header text-center">
            <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
        </div>
        <div class="swiper categories-swiper">
            <div class="swiper-wrapper">
                {% for category in categories %}
                <div class="swiper-slide text-center">
                    <a href="{% url 'courses_list' %}?category={{ category.slug }}" class="category-card" style="display:block; padding:2rem 1rem; background:white; border-radius:12px;">{{ category.name }}</a>
                </div>
                {% endfor %}
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
    </div>
</section>

<section id="courses" class="section courses-section" style="padding:5rem 0;">
    <div class="container">
        <div class="section-header text-center">
            <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
        </div>
        <div class="courses-grid" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:2rem;">
            {% for course in popular_courses %}
            <div class="course-card">
                <img src="{{ course.image.url }}" class="course-card-img" alt="{{ course.title }}">
                <div class="course-card-content">
                    <span class="course-category">{{ course.category.name }}</span>
                    <h3 class="course-card-title">{{ course.title }}</h3>
                    <p class="course-card-text">{{ course.description|truncatechars:100 }}</p>
                    <div class="course-card-meta" style="display:flex; justify-content:space-between; align-items:center;">
                        <div class="course-rating">
                            <i class="bi bi-star-fill"></i> {{ course.rating }}
                            <span class="course-reviews">({{ course.reviews_count }} –æ—Ç–∑—ã–≤–æ–≤)</span>
                        </div>
                        <span class="course-price">{% if course.price > 0 %}{{ course.price }} ‚ÇΩ{% else %}–ë–µ—Å–ø–ª–∞—Ç–Ω–æ{% endif %}</span>
                    </div>
                </div>
                <div class="course-card-footer">
                    <a href="{% url 'course_detail' course.id %}" class="btn-full">{% if user.is_authenticated and user in course.enrolled_users.all %}–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å{% else %}–ü–æ–¥—Ä–æ–±–Ω–µ–µ{% endif %}</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="testimonials-section" style="padding:5rem 0; background:#F8FAFC;">
    <div class="container">
        <div class="section-header text-center">
            <h2>–û—Ç–∑—ã–≤—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h2>
        </div>
        <div class="swiper testimonials-swiper">
            <div class="swiper-wrapper">
                {% for testimonial in testimonials %}
                <div class="swiper-slide">
                    <div class="testimonial-card" style="padding:2rem;">
                        <div class="testimonial-header" style="display:flex; align-items:center; gap:1rem; margin-bottom:1rem;">
                            <img src="{{ testimonial.avatar.url }}" class="testimonial-avatar" style="width:50px; height:50px; border-radius:50%; object-fit:cover;">
                            <div class="testimonial-user">
                                <h3>{{ testimonial.user_name }}</h3>
                                <p>{{ testimonial.course_name }}</p>
                            </div>
                        </div>
                        <div class="testimonial-rating" style="color:#F6AD55; margin-bottom:1rem;">
                            {% for i in "12345" %}
                                {% if forloop.counter <= testimonial.rating|floatformat:0 %}
                                <i class="bi bi-star-fill"></i>
                                {% else %}
                                <i class="bi bi-star"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <p>{{ testimonial.text }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
    </div>
</section>

<section class="faq-section" style="padding:5rem 0;">
    <div class="container">
        <div class="section-header text-center">
            <h2>–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
        </div>
        <div class="faq-container" style="max-width:800px; margin:0 auto;">
            {% for faq in faqs %}
            <div class="faq-item">
                <button class="faq-question" style="width:100%; padding:1.5rem; text-align:left; font-weight:600; font-size:1.1rem; cursor:pointer;">{{ faq.question }}</button>
                <div class="faq-answer">{{ faq.answer }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="cta-section" style="padding:4rem 0; background:linear-gradient(135deg,#F6AD55,#ECC94B); text-align:center; color:#0B1020;">
    <div class="container">
        <h2>–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –∫–∞—Ä—å–µ—Ä—É –≤ IT?</h2>
        <p style="margin-bottom:2rem;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ç—ã—Å—è—á–∞–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∏–∑–º–µ–Ω–∏–ª–∏ —Å–≤–æ—é –∂–∏–∑–Ω—å —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–∏—Ö –∫—É—Ä—Å–æ–≤</p>
        <a href="{% url 'signup' %}" class="cta-button" style="background:#01349D; color:white; padding:1rem 2rem; border-radius:8px; font-weight:600;">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</a>
    </div>
</section>

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
<script>
var categoriesSwiper = new Swiper('.categories-swiper', {
    slidesPerView: 'auto',
    spaceBetween: 20,
    navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
});
var testimonialsSwiper = new Swiper('.testimonials-swiper', {
    slidesPerView: 1,
    spaceBetween: 20,
    loop:true,
    navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
    breakpoints: { 768:{ slidesPerView:2 }, 1024:{ slidesPerView:3 } }
});

document.querySelectorAll('.faq-question').forEach(btn=>{
    btn.addEventListener('click', ()=>{
        btn.parentElement.classList.toggle('active');
    });
});
</script>
{% endblock %}
