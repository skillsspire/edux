{% extends "base.html" %}
{% load static %}

{% block title %}Все статьи — SkillsSpire{% endblock %}

{% block content %}
<div class="articles-container container py-5">

  <!-- Заголовок -->
  <div class="text-center mb-5">
    <h1 class="fw-bold mb-3" style="font-size: 2rem;">Полезные статьи</h1>
    <p class="text-muted" style="font-size: 1.1rem;">
      Актуальные материалы по финансам, аналитике, менеджменту и карьерному росту
    </p>
  </div>

  {% if articles %}
    <!-- Featured статья (только текст) -->
    <div class="featured-article mb-5 p-4">
      {% with first=articles.0 %}
      <a href="{% url 'article_detail' first.slug %}" class="featured-link">

        <div class="featured-text">
          {% if first.category %}
            <span class="badge bg-primary mb-3">{{ first.category.name }}</span>
          {% endif %}

          <h2 class="featured-title">{{ first.title }}</h2>

          <p class="featured-excerpt">
            {{ first.excerpt|truncatewords:50 }}
          </p>

          <span class="read-more">Читать статью →</span>
        </div>

      </a>
      {% endwith %}
    </div>

    <!-- Сетка статей без картинок -->
    <div class="articles-grid">
      {% for article in articles|slice:"1:" %}
        <article class="article-card p-4">

          <a href="{% url 'article_detail' article.slug %}" class="article-link">

            {% if article.category %}
              <span class="badge bg-primary mb-3">{{ article.category.name }}</span>
            {% endif %}

            <h3 class="article-title">{{ article.title }}</h3>

            <p class="date">
              <i class="bi bi-calendar3 me-1"></i>
              {% if article.published_at %}
                {{ article.published_at|date:"d E Y" }}
              {% endif %}
            </p>

            <p class="excerpt">{{ article.excerpt|default:"Описание появится позже." }}</p>

            <span class="read-more mt-2 d-inline-block">Читать статью →</span>

          </a>

        </article>
      {% endfor %}
    </div>

  {% else %}
    <div class="text-center py-5">
      <i class="bi bi-file-text" style="font-size: 3rem; color: var(--color-border)"></i>
      <h4 class="text-muted mt-3">Статьи скоро появятся</h4>
      <p class="text-muted">Мы готовим для вас полезные материалы</p>
    </div>
  {% endif %}
</div>

{% endblock %}

{% block extra_css %}
<style>
/* Контейнер */
.articles-container {
  max-width: 1100px;
}

/* Featured статья — теперь без картинки */
.featured-article {
  border-radius: 14px;
  border: 1px solid var(--color-border);
  background: var(--bs-light);
  box-shadow: var(--shadow-sm);
}

.featured-title {
  font-size: 1.7rem;
  font-weight: 700;
  margin-bottom: 12px;
}

.featured-excerpt {
  font-size: 1.1rem;
  color: var(--color-text-secondary);
  margin-bottom: 18px;
}

.featured-link {
  text-decoration: none;
  color: inherit;
  display: block;
}

/* Сетка */
.articles-grid {
  display: grid;
  gap: 28px;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
}

/* Карточка */
.article-card {
  border-radius: 14px;
  border: 1px solid var(--color-border);
  background: #fff;
  box-shadow: var(--shadow-sm);
  transition: var(--transition);
}

.article-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}

.article-title {
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 10px;
}

.excerpt {
  font-size: 0.95rem;
  line-height: 1.45;
  color: var(--color-text-secondary);
  max-height: 65px;
  overflow: hidden;
}

.read-more {
  font-weight: 600;
  color: var(--bs-primary);
}

.date {
  font-size: 0.85rem;
  color: var(--color-text-tertiary);
  margin-bottom: 8px;
}

</style>
{% endblock %}
